<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Analyze the Change of New York House Prices from 2000-2020</title>
  <meta name="description" content="Chapter 3 Data transformation | Analyze the Change of New York House Prices from 2000-2020" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Analyze the Change of New York House Prices from 2000-2020" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Analyze the Change of New York House Prices from 2000-2020" />
  
  
  

<meta name="author" content="Yu Cheng | Hui Li" />


<meta name="date" content="2022-05-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Houseprice</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#import-data"><i class="fa fa-check"></i><b>3.1</b> Import Data</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#data-transformation-1"><i class="fa fa-check"></i><b>3.2</b> Data Transformation</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-transformation.html"><a href="data-transformation.html#combine-the-five-tables-into-one"><i class="fa fa-check"></i><b>3.2.1</b> Combine the five tables into one</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-transformation.html"><a href="data-transformation.html#add-one-new-column-to-the-dataset-and-rearrange-the-order-of-the-columns"><i class="fa fa-check"></i><b>3.2.2</b> Add one new column to the dataset and Rearrange the order of the columns</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-transformation.html"><a href="data-transformation.html#rename-and-display-all-variables-name-of-new-dataset"><i class="fa fa-check"></i><b>3.2.3</b> Rename and display all variables name of new dataset</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-transformation.html"><a href="data-transformation.html#remove-the-columns-and-rows-we-dont-need"><i class="fa fa-check"></i><b>3.2.4</b> Remove the columns and rows we don’t need</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a><ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#describe-the-missing-values"><i class="fa fa-check"></i><b>4.1</b> Describe the missing values</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#exploring-the-missing-values"><i class="fa fa-check"></i><b>4.2</b> Exploring the missing values</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#excluding-missing-values-from-analyses"><i class="fa fa-check"></i><b>4.3</b> Excluding Missing Values from Analyses</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyze the Change of New York House Prices from 2000-2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1 hasAnchor">
<h1><span class="header-section-number">Chapter 3</span> Data transformation<a href="data-transformation.html#data-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="import-data" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.1</span> Import Data<a href="data-transformation.html#import-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The Department of Finance’s Rolling Sales files lists properties that sold in the last twelve-month period in New York City. We display the variables names of the datasets:</p>
<pre><code>##  [1] &quot;BOROUGH&quot;                        &quot;NEIGHBORHOOD&quot;                   &quot;BUILDING CLASS CATEGORY&quot;       
##  [4] &quot;TAX CLASS AT PRESENT&quot;           &quot;BLOCK&quot;                          &quot;LOT&quot;                           
##  [7] &quot;EASEMENT&quot;                       &quot;BUILDING CLASS AT PRESENT&quot;      &quot;ADDRESS&quot;                       
## [10] &quot;APARTMENT NUMBER&quot;               &quot;ZIP CODE&quot;                       &quot;RESIDENTIAL UNITS&quot;             
## [13] &quot;COMMERCIAL UNITS&quot;               &quot;TOTAL UNITS&quot;                    &quot;LAND SQUARE FEET&quot;              
## [16] &quot;GROSS SQUARE FEET&quot;              &quot;YEAR BUILT&quot;                     &quot;TAX CLASS AT TIME OF SALE&quot;     
## [19] &quot;BUILDING CLASS AT TIME OF SALE&quot; &quot;SALE PRICE&quot;                     &quot;SALE DATE&quot;</code></pre>
<p>Pick a dataset to take a brief look at:</p>
<pre><code>## # A tibble: 7,593 × 21
##    BOROUGH NEIGHBORHOOD `BUILDING CLASS CATEGORY` `TAX CLASS AT PR… BLOCK   LOT EASEMENT `BUILDING CLASS… ADDRESS `APARTMENT NUMB…
##    &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;                     &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;    &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;           
##  1 2       BATHGATE     01 ONE FAMILY DWELLINGS   1                  3037   101 NA       S0               443 EA… &lt;NA&gt;            
##  2 2       BATHGATE     01 ONE FAMILY DWELLINGS   1                  3039    63 NA       A1               469 EA… &lt;NA&gt;            
##  3 2       BATHGATE     01 ONE FAMILY DWELLINGS   1                  3045    12 NA       A1               2052 B… &lt;NA&gt;            
##  4 2       BATHGATE     01 ONE FAMILY DWELLINGS   1                  3046    39 NA       A1               2075 B… &lt;NA&gt;            
##  5 2       BATHGATE     01 ONE FAMILY DWELLINGS   1                  3048    28 NA       A1               540 E … &lt;NA&gt;            
##  6 2       BATHGATE     01 ONE FAMILY DWELLINGS   1                  3053   108 NA       A9               2317 B… &lt;NA&gt;            
##  7 2       BATHGATE     02 TWO FAMILY DWELLINGS   1                  2912   135 NA       B1               492 CL… &lt;NA&gt;            
##  8 2       BATHGATE     02 TWO FAMILY DWELLINGS   1                  2912   145 NA       B1               3811 3… &lt;NA&gt;            
##  9 2       BATHGATE     02 TWO FAMILY DWELLINGS   1                  2912   145 NA       B1               3811 3… &lt;NA&gt;            
## 10 2       BATHGATE     02 TWO FAMILY DWELLINGS   1                  2912   146 NA       B1               3809 3… &lt;NA&gt;            
## # … with 7,583 more rows, and 11 more variables: ZIP CODE &lt;dbl&gt;, RESIDENTIAL UNITS &lt;dbl&gt;, COMMERCIAL UNITS &lt;dbl&gt;,
## #   TOTAL UNITS &lt;dbl&gt;, LAND SQUARE FEET &lt;dbl&gt;, GROSS SQUARE FEET &lt;dbl&gt;, YEAR BUILT &lt;dbl&gt;, TAX CLASS AT TIME OF SALE &lt;chr&gt;,
## #   BUILDING CLASS AT TIME OF SALE &lt;chr&gt;, SALE PRICE &lt;dbl&gt;, SALE DATE &lt;dttm&gt;</code></pre>
</div>
<div id="data-transformation-1" class="section level2 hasAnchor">
<h2><span class="header-section-number">3.2</span> Data Transformation<a href="data-transformation.html#data-transformation-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="combine-the-five-tables-into-one" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.1</span> Combine the five tables into one<a href="data-transformation.html#combine-the-five-tables-into-one" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before combine:</p>
<pre><code>##    Length     Class      Mode 
##     23615 character character</code></pre>
<p>After combine:</p>
<pre><code>##    Length     Class      Mode 
##     99183 character character</code></pre>
</div>
<div id="add-one-new-column-to-the-dataset-and-rearrange-the-order-of-the-columns" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.2</span> Add one new column to the dataset and Rearrange the order of the columns<a href="data-transformation.html#add-one-new-column-to-the-dataset-and-rearrange-the-order-of-the-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>## # A tibble: 6 × 22
##   BOROUGH Name      NEIGHBORHOOD  `BUILDING CLASS… `TAX CLASS AT P… BLOCK   LOT EASEMENT `BUILDING CLASS… ADDRESS `APARTMENT NUMB…
##   &lt;chr&gt;   &lt;fct&gt;     &lt;chr&gt;         &lt;chr&gt;            &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;    &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;           
## 1 1       Manhattan ALPHABET CITY 02 TWO FAMILY D… 1                  377    70 NA       B1               235 EA… &lt;NA&gt;            
## 2 1       Manhattan ALPHABET CITY 07 RENTALS - WA… 2                  376    54 NA       C4               719 EA… &lt;NA&gt;            
## 3 1       Manhattan ALPHABET CITY 07 RENTALS - WA… 2                  385    46 NA       C4               248 EA… &lt;NA&gt;            
## 4 1       Manhattan ALPHABET CITY 07 RENTALS - WA… 2                  386    53 NA       C1               233 EA… &lt;NA&gt;            
## 5 1       Manhattan ALPHABET CITY 07 RENTALS - WA… 2B                 389    47 NA       C4               627 EA… &lt;NA&gt;            
## 6 1       Manhattan ALPHABET CITY 07 RENTALS - WA… 2                  390    57 NA       C7               197 EA… &lt;NA&gt;            
## # … with 11 more variables: ZIP CODE &lt;dbl&gt;, RESIDENTIAL UNITS &lt;dbl&gt;, COMMERCIAL UNITS &lt;dbl&gt;, TOTAL UNITS &lt;dbl&gt;,
## #   LAND SQUARE FEET &lt;dbl&gt;, GROSS SQUARE FEET &lt;dbl&gt;, YEAR BUILT &lt;dbl&gt;, TAX CLASS AT TIME OF SALE &lt;chr&gt;,
## #   BUILDING CLASS AT TIME OF SALE &lt;chr&gt;, SALE PRICE &lt;dbl&gt;, SALE DATE &lt;dttm&gt;</code></pre>
</div>
<div id="rename-and-display-all-variables-name-of-new-dataset" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.3</span> Rename and display all variables name of new dataset<a href="data-transformation.html#rename-and-display-all-variables-name-of-new-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>##  [1] &quot;BOROUGH&quot;                        &quot;Name&quot;                           &quot;NEIGHBORHOOD&quot;                  
##  [4] &quot;TAX CLASS AT PRESENT&quot;           &quot;BLOCK&quot;                          &quot;LOT&quot;                           
##  [7] &quot;EASEMENT&quot;                       &quot;BUILDING CLASS AT PRESENT&quot;      &quot;ADDRESS&quot;                       
## [10] &quot;APARTMENT NUMBER&quot;               &quot;ZIP CODE&quot;                       &quot;BUILDING_CLASS_CATEGORY&quot;       
## [13] &quot;RESIDENTIAL_UNITS&quot;              &quot;COMMERCIAL_UNITS&quot;               &quot;TOTAL_UNITS&quot;                   
## [16] &quot;LAND_SQUARE_FEET&quot;               &quot;GROSS_SQUARE_FEET&quot;              &quot;YEAR_BUILT&quot;                    
## [19] &quot;TAX_CLASS_AT_TIME_OF_SALE&quot;      &quot;BUILDING_CLASS_AT_TIME_OF_SALE&quot; &quot;SALE_PRICE&quot;                    
## [22] &quot;SALE_DATE&quot;</code></pre>
</div>
<div id="remove-the-columns-and-rows-we-dont-need" class="section level3 hasAnchor">
<h3><span class="header-section-number">3.2.4</span> Remove the columns and rows we don’t need<a href="data-transformation.html#remove-the-columns-and-rows-we-dont-need" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before remove:</p>
<pre><code>##  [1] &quot;BOROUGH&quot;                        &quot;Name&quot;                           &quot;NEIGHBORHOOD&quot;                  
##  [4] &quot;TAX CLASS AT PRESENT&quot;           &quot;BLOCK&quot;                          &quot;LOT&quot;                           
##  [7] &quot;EASEMENT&quot;                       &quot;BUILDING CLASS AT PRESENT&quot;      &quot;ADDRESS&quot;                       
## [10] &quot;APARTMENT NUMBER&quot;               &quot;ZIP CODE&quot;                       &quot;BUILDING_CLASS_CATEGORY&quot;       
## [13] &quot;RESIDENTIAL_UNITS&quot;              &quot;COMMERCIAL_UNITS&quot;               &quot;TOTAL_UNITS&quot;                   
## [16] &quot;LAND_SQUARE_FEET&quot;               &quot;GROSS_SQUARE_FEET&quot;              &quot;YEAR_BUILT&quot;                    
## [19] &quot;TAX_CLASS_AT_TIME_OF_SALE&quot;      &quot;BUILDING_CLASS_AT_TIME_OF_SALE&quot; &quot;SALE_PRICE&quot;                    
## [22] &quot;SALE_DATE&quot;</code></pre>
<pre><code>## # A tibble: 6 × 22
##   BOROUGH Name      NEIGHBORHOOD  `TAX CLASS AT PRESENT` BLOCK   LOT EASEMENT `BUILDING CLASS… ADDRESS `APARTMENT NUMB… `ZIP CODE`
##   &lt;chr&gt;   &lt;fct&gt;     &lt;chr&gt;         &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;    &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;                 &lt;dbl&gt;
## 1 1       Manhattan ALPHABET CITY 1                        377    70 NA       B1               235 EA… &lt;NA&gt;                  10009
## 2 1       Manhattan ALPHABET CITY 2                        376    54 NA       C4               719 EA… &lt;NA&gt;                  10009
## 3 1       Manhattan ALPHABET CITY 2                        385    46 NA       C4               248 EA… &lt;NA&gt;                  10009
## 4 1       Manhattan ALPHABET CITY 2                        386    53 NA       C1               233 EA… &lt;NA&gt;                  10009
## 5 1       Manhattan ALPHABET CITY 2B                       389    47 NA       C4               627 EA… &lt;NA&gt;                  10009
## 6 1       Manhattan ALPHABET CITY 2                        390    57 NA       C7               197 EA… &lt;NA&gt;                  10009
## # … with 11 more variables: BUILDING_CLASS_CATEGORY &lt;chr&gt;, RESIDENTIAL_UNITS &lt;dbl&gt;, COMMERCIAL_UNITS &lt;dbl&gt;, TOTAL_UNITS &lt;dbl&gt;,
## #   LAND_SQUARE_FEET &lt;dbl&gt;, GROSS_SQUARE_FEET &lt;dbl&gt;, YEAR_BUILT &lt;dbl&gt;, TAX_CLASS_AT_TIME_OF_SALE &lt;chr&gt;,
## #   BUILDING_CLASS_AT_TIME_OF_SALE &lt;chr&gt;, SALE_PRICE &lt;dbl&gt;, SALE_DATE &lt;dttm&gt;</code></pre>
<p>Because there are some variables that are not useful for our study of house price changes in New York, and in addition to that, we do not need houses with transactions below $1,000, so we remove them.</p>
<pre><code>##  [1] &quot;BOROUGH&quot;                        &quot;Name&quot;                           &quot;NEIGHBORHOOD&quot;                  
##  [4] &quot;BUILDING_CLASS_CATEGORY&quot;        &quot;RESIDENTIAL_UNITS&quot;              &quot;COMMERCIAL_UNITS&quot;              
##  [7] &quot;TOTAL_UNITS&quot;                    &quot;LAND_SQUARE_FEET&quot;               &quot;GROSS_SQUARE_FEET&quot;             
## [10] &quot;YEAR_BUILT&quot;                     &quot;TAX_CLASS_AT_TIME_OF_SALE&quot;      &quot;BUILDING_CLASS_AT_TIME_OF_SALE&quot;
## [13] &quot;SALE_PRICE&quot;                     &quot;SALE_DATE&quot;</code></pre>
<pre><code>## # A tibble: 6 × 14
##   BOROUGH Name      NEIGHBORHOOD  BUILDING_CLASS_… RESIDENTIAL_UNI… COMMERCIAL_UNITS TOTAL_UNITS LAND_SQUARE_FEET GROSS_SQUARE_FE…
##   &lt;chr&gt;   &lt;fct&gt;     &lt;chr&gt;         &lt;chr&gt;                       &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1 1       Manhattan ALPHABET CITY 02 TWO FAMILY D…                2                0           2              882             2160
## 2 1       Manhattan ALPHABET CITY 07 RENTALS - WA…               20                0          20             2302             9750
## 3 1       Manhattan ALPHABET CITY 07 RENTALS - WA…               29                0          29             3927            17754
## 4 1       Manhattan ALPHABET CITY 07 RENTALS - WA…               10                0          10             2248             6985
## 5 1       Manhattan ALPHABET CITY 07 RENTALS - WA…               25                5          30             3839            18836
## 6 1       Manhattan ALPHABET CITY 07 RENTALS - WA…                8                0           8             1859             5340
## # … with 5 more variables: YEAR_BUILT &lt;dbl&gt;, TAX_CLASS_AT_TIME_OF_SALE &lt;chr&gt;, BUILDING_CLASS_AT_TIME_OF_SALE &lt;chr&gt;,
## #   SALE_PRICE &lt;dbl&gt;, SALE_DATE &lt;dttm&gt;</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/YuCheng222/Houseprice/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/YuCheng222/Houseprice/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
